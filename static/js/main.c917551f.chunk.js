(this.webpackJsonphealthy=this.webpackJsonphealthy||[]).push([[0],{44:function(e,n,t){},60:function(e,n,t){"use strict";t.r(n);var c,r,a,i,o,d,l,s,u,j,b,f=t(1),O=t.n(f),m=t(25),h=t.n(m),p=(t(44),t(2)),x=t(6),g=t(5),v=t(7),y=t(3),N=t(4),I=t(30),C=t(15),S=function(e,n){var t=Object(f.useMemo)((function(){return n}),[]),c=localStorage.getItem(e),r=c?JSON.parse(c):t,a=Object(f.useState)(r),i=Object(g.a)(a,2),o=i[0],d=i[1];return Object(f.useEffect)((function(){var n=localStorage.getItem(e);d(n?JSON.parse(n):t)}),[t,e]),[o,Object(f.useCallback)((function(n){d(n),localStorage.setItem(e,JSON.stringify(n))}),[e])]},k=t(0),w="EXKD4pinV1LPdlzNNnGWnI4IBh0GvmycfTVMJexP",F=O.a.createContext({key:w,setKey:function(){}}),M=function(e){var n=S("API_KEY",w),t=Object(g.a)(n,2),c=t[0],r={key:void 0===c?"":c,setKey:t[1]};return Object(k.jsx)(F.Provider,Object(N.a)({value:r},e))},E=function(e){return{name:e.nutrientName,id:e.nutrientId,value:e.value,unit:e.unitName,group:"lol"}},P=function(e){return{name:e.description,brand:e.brandOwner,id:e.fdcId,nutrients:e.foodNutrients.map(E).filter(A).sort(L)}},D=function(e){var n;return{name:e.nutrient.name,id:e.nutrient.id,unit:e.nutrient.unitName,value:e.amount,group:null===(n=B.find((function(n){return n.fdcId===e.nutrient.id})))||void 0===n?void 0:n.group}},T=function(e){return{name:e.description,brand:e.brandOwner,id:e.fdcId,nutrients:e.foodNutrients.map(D).filter(A).sort(L)}},A=function(e){return J.includes(e.name)},L=function(e,n){return J.indexOf(e.name)-J.indexOf(n.name)},B=[{fdcId:1051,fdcName:"Water",group:"macro"},{fdcId:1008,fdcName:"Energy",group:"macro"},{fdcId:1003,fdcName:"Protein",group:"macro"},{fdcId:1004,fdcName:"Total lipid (fat)",group:"lipid"},{fdcId:2039,fdcName:"Carbohydrates",group:"macro"},{fdcId:1079,fdcName:"Fiber, total dietary",group:"macro"},{fdcId:1063,fdcName:"Sugars, Total NLEA",group:"macro"},{fdcId:1087,fdcName:"Calcium, Ca",group:"mineral"},{fdcId:1089,fdcName:"Iron, Fe",group:"mineral"},{fdcId:1090,fdcName:"Magnesium, Mg",group:"mineral"},{fdcId:1091,fdcName:"Phosphorus, P",group:"mineral"},{fdcId:1092,fdcName:"Potassium, K",group:"mineral"},{fdcId:1093,fdcName:"Sodium, Na",group:"mineral"},{fdcId:1095,fdcName:"Zinc, Zn",group:"mineral"},{fdcId:1098,fdcName:"Copper, Cu",group:"mineral"},{fdcId:1101,fdcName:"Manganese, Mn",group:"mineral"},{fdcId:1103,fdcName:"Selenium, Se",group:"mineral"},{fdcId:1162,fdcName:"Vitamin C, total ascorbic acid",group:"vitamin"},{fdcId:1165,fdcName:"Thiamin",group:"vitamin"},{fdcId:1166,fdcName:"Riboflavin",group:"vitamin"},{fdcId:1167,fdcName:"Niacin",group:"vitamin"},{fdcId:1170,fdcName:"Pantothenic acid",group:"vitamin"},{fdcId:1175,fdcName:"Vitamin B-6",group:"vitamin"},{fdcId:1106,fdcName:"Vitamin A, RAE",group:"vitamin"},{fdcId:1107,fdcName:"Carotene, beta",group:"vitamin"},{fdcId:1109,fdcName:"Vitamin E (alpha-tocopherol)",group:"vitamin"},{fdcId:1185,fdcName:"Vitamin K (phylloquinone)",group:"vitamin"},{fdcId:1258,fdcName:"Fatty acids, total saturated",group:"lipid"},{fdcId:1292,fdcName:"Fatty acids, total monounsaturated",group:"lipid"},{fdcId:1293,fdcName:"Fatty acids, total polyunsaturated",group:"lipid"}],J=Object.values(B).map((function(e){return e.fdcName})),K=function(e,n){return e&&n?"https://api.nal.usda.gov/fdc/v1/food/".concat(n,"?api_key=").concat(e):null},z=function(e){if(e&&"fdcId"in e)return e},V=function(e){if(e&&!("fdcId"in e))return e},R=function(e){var n=Object(f.useContext)(F).key,t=K(n,e),c=Object(C.b)(t),r=c.data,a=c.error,i=z(r);return{food:i&&T(i),data:r,apiError:V(r),error:a,isLoading:t&&!a&&!r}},Y=function(e){var n=e.morsel,t=Object(I.a)(e,["morsel"]),c=R(n.id),r=c.food,a=c.error;return Object(k.jsxs)("div",Object(N.a)(Object(N.a)({},t),{},{children:[a&&a.toString(),!r&&!a&&"loading...",r&&"".concat(n.amount).concat(n.unit," ").concat(null===r||void 0===r?void 0:r.name," (").concat(null===r||void 0===r?void 0:r.brand,")")]}))},U=y.a.ul(c||(c=Object(p.a)(["\n  margin: 0;\n  padding: 0;\n  li {\n    list-style: none;\n  }\n"]))),q=function(e){var n=e.meal,t=Object(I.a)(e,["meal"]),c=function(e){var n=Object(f.useContext)(F).key,t=e.map(Object(v.partial)(K,n)),c=Object(C.c)((function(e){return t[e]})),r=c.data,a=c.error,i=c.setSize;Object(f.useEffect)((function(){i(e.length)}),[i,e.length]);var o=Object(v.compact)(null===r||void 0===r?void 0:r.map(z)).map(T),d=Object(v.compact)(null===r||void 0===r?void 0:r.map(V));return{foods:o,responses:r,errors:d,error:a}}(Object(v.map)(n.foods,"id")).foods;if(!c)return null;var r=B.map((function(e){var n,t;return{name:e.fdcName,value:c.reduce((function(n,t){var c,r;return n+(null!==(c=null===(r=Object(v.find)(t.nutrients,{name:e.fdcName}))||void 0===r?void 0:r.value)&&void 0!==c?c:0)}),0),unit:null===(n=Object(v.find)(null===(t=Object(v.first)(c))||void 0===t?void 0:t.nutrients,{name:e.fdcName}))||void 0===n?void 0:n.unit,group:e.group}})),a=Object(v.groupBy)(r,"group");return Object(k.jsxs)("div",Object(N.a)(Object(N.a)({},t),{},{children:[Object(k.jsx)("h3",{children:n.date}),Object(k.jsx)(U,{children:n.foods.map((function(e){return Object(k.jsx)("li",{children:Object(k.jsx)(Y,{morsel:e})},e.id)}))}),Object(k.jsxs)("table",{children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Nutrient"}),Object(k.jsx)("th",{children:"Amount"})]})}),Object(k.jsx)("tbody",{children:Object.keys(a).map((function(e){return Object(k.jsxs)(O.a.Fragment,{children:[Object(k.jsx)("h4",{children:e}),a[e].map((function(e){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:e.name}),Object(k.jsxs)("td",{children:[Math.round(e.value)," ",e.unit]})]})}))]},e)}))})]})]}))},G=y.a.main.attrs({id:"main"})(r||(r=Object(p.a)(["\n  padding: 4px;\n"]))),W=O.a.createContext({meals:[],setMeals:function(){}}),_=function(e){var n=S("meals",[]),t=Object(g.a)(n,2),c={meals:t[0],setMeals:t[1]};return Object(k.jsx)(W.Provider,Object(N.a)({value:c},e))},H=y.a.div(a||(a=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),X=function(){var e=Object(f.useContext)(W).meals,n=void 0===e?[]:e,t=Object(f.useMemo)((function(){return Object(v.orderBy)(n,["date"],["desc"])}),[n]),c=Object(f.useState)(0),r=Object(g.a)(c,2),a=r[0],i=r[1];Object(f.useEffect)((function(){i(0)}),[n]);var o=a<t.length-1,d=a>0,l=t[a];return Object(k.jsxs)(G,{children:[Object(k.jsx)("h2",{children:"Meals"}),Object(k.jsxs)(H,{children:[Object(k.jsx)("button",{onClick:function(){o&&i(a+1)},disabled:!o,children:"< Prev"}),Object(k.jsx)("button",{onClick:function(){d&&i(a-1)},disabled:!d,children:"Next >"})]}),l&&Object(k.jsx)(q,{meal:l})]})},Z=t(13),Q=y.a.nav(i||(i=Object(p.a)(["\n  background-color: #eeeeee;\n  border-top: 1px solid #777777;\n  box-sizing: border-box;\n\n  ul {\n    padding: 0;\n    margin: 0;\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    list-style: none;\n\n    li {\n      margin: 0;\n    }\n\n    li:not(:last-child) {\n      border-right: 1px solid black;\n    }\n  }\n"]))),$=Object(y.a)(Z.b)(o||(o=Object(p.a)(["\n  padding: 1rem 0;\n  display: flex;\n  justify-content: center;\n"]))),ee=t(12),ne=y.a.button(d||(d=Object(p.a)([""]))),te=y.a.input(l||(l=Object(p.a)([""]))),ce=t(28),re=t.n(ce);re.a.setAppElement("#root");var ae,ie,oe,de,le,se=Object(y.a)(re.a)(s||(s=Object(p.a)(["\n  margin: 1rem;\n  background-color: white;\n  border: 1px solid black;\n"]))),ue=y.a.div(u||(u=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 1rem;\n  border-bottom: 1px solid grey;\n  background-color: lightgrey;\n"]))),je=y.a.h1(j||(j=Object(p.a)(["\n  margin: 0;\n"]))),be=y.a.div(b||(b=Object(p.a)(["\n  margin-top: 1rem;\n  padding: 1rem;\n"]))),fe=function(e){var n=e.isOpen,t=e.onClose,c=e.title,r=e.children;return Object(k.jsxs)(se,{isOpen:n,onRequestClose:t,contentLabel:c,children:[Object(k.jsxs)(ue,{children:[Object(k.jsx)(je,{children:c}),Object(k.jsx)("button",{onClick:t,children:"close"})]}),Object(k.jsx)(be,{children:r})]})},Oe=t(39),me=t.n(Oe),he=t(21),pe=function(e){var n=e.id,t=e.onDone,c=R(n),r=c.food,a=c.error,i=Object(f.useState)(100),o=Object(g.a)(i,2),d=o[0],l=o[1],s=Object(f.useState)(me()().format("YYYY-MM-DD")),u=Object(g.a)(s,2),j=u[0],b=u[1],O=Object(f.useContext)(W),m=O.meals,h=O.setMeals,p=function(){l(100)};Object(f.useEffect)((function(){return p(),p}),[]);var x=function(e,n,t){var c,r,a,i=Object(v.findIndex)(m||[],{date:t}),o={id:e,amount:n,unit:"g"};if(console.log({existingMealIndex:i}),-1===i)h([].concat(Object(ee.a)(m||[]),[{date:t,foods:[o]}]));else{var d=m[i];h((c=m,r=i,a=Object(N.a)(Object(N.a)({},d),{},{foods:[].concat(Object(ee.a)(d.foods),[o])}),Object.assign(Object(ee.a)(c),Object(he.a)({},r,a))))}};return Object(k.jsxs)(k.Fragment,{children:[a&&Object(k.jsx)("code",{children:JSON.stringify(a)}),!r&&"loading...",Object(k.jsxs)("label",{children:["Which meal?",Object(k.jsx)(te,{type:"date",onChange:function(e){return b(e.target.value)},value:j})]}),Object(k.jsxs)("label",{children:["How Much ",null===r||void 0===r?void 0:r.name,"?",Object(k.jsx)(te,{type:"number",onChange:function(e){return l(Number(e.target.value))},value:d})]}),Object(k.jsx)(ne,{onClick:function(){t()},children:"Cancel"}),Object(k.jsx)(ne,{onClick:function(){x(n,d,j),t()},children:"Do it baby!"})]})},xe=function(e){var n=e.id,t=e.isOpen,c=e.onClose;return Object(k.jsx)(fe,{isOpen:t,onClose:c,title:"Add Food To Meal",children:Object(k.jsx)(pe,{id:n,onDone:c})})},ge=y.a.div(ae||(ae=Object(p.a)(["\n  max-width: 400px;\n"]))),ve=y.a.div(ie||(ie=Object(p.a)(["\n  display: grid;\n  grid-template-columns: 1fr auto;\n  margin-bottom: 4px;\n"]))),ye=y.a.div(oe||(oe=Object(p.a)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),Ne=(y.a.ul(de||(de=Object(p.a)(["\n  margin: 0;\n  padding: 0;\n  li {\n    list-style: none;\n  }\n"]))),function(e){var n=e.food,t=e.actions;return Object(k.jsx)(ge,{children:Object(k.jsxs)(ve,{children:[Object(k.jsxs)(ye,{children:[n.name," ",n.brand&&"(".concat(n.brand,")")]}),Object(k.jsx)("div",{children:t})]})})}),Ie=O.a.createContext({starred:[],setStarred:function(){}}),Ce=function(e){var n=S("starred",[]),t=Object(g.a)(n,2),c=t[0],r={starred:void 0===c?[]:c,setStarred:t[1]};return Object(k.jsx)(Ie.Provider,Object(N.a)({value:r},e))},Se=function(e,n){var t=Object(C.b)(function(e,n){return e&&0!==e.trim().length&&n&&0!==n.length?"https://api.nal.usda.gov/fdc/v1/foods/search?api_key=".concat("EXKD4pinV1LPdlzNNnGWnI4IBh0GvmycfTVMJexP","&query=").concat(encodeURIComponent(e.trim()),"&dataType=").concat(encodeURIComponent(n.join(","))):null}(e,n));return{data:t.data,error:t.error}};!function(e){e.BRANDED="Branded",e.SURVEY="Survey (FNDDS)",e.LEGACY="SR Legacy",e.FOUNDATION="Foundation"}(le||(le={}));var ke,we,Fe,Me,Ee,Pe,De,Te,Ae,Le=Object(y.a)(te).attrs({type:"text"})(ke||(ke=Object(p.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  font-size: 1rem;\n  padding: 0.5rem;\n"]))),Be=y.a.ul(we||(we=Object(p.a)(["\n  padding: 0;\n  margin: 0;\n  margin-top: 1rem;\n  display: grid;\n  gap: 1rem;\n  li {\n    list-style: none;\n  }\n"]))),Je=y.a.div(Fe||(Fe=Object(p.a)(["\n  margin-top: 8px;\n  display: grid;\n  grid-template-rows: 1fr 1fr;\n  grid-template-columns: 1fr 1fr;\n"]))),Ke=function(){var e,n=S("searchQuery",""),t=Object(g.a)(n,2),c=t[0],r=t[1],a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,t=Object(f.useState)(e),c=Object(g.a)(t,2),r=c[0],a=c[1];return Object(f.useEffect)((function(){var t=setTimeout((function(){return a(e)}),n);return function(){return clearTimeout(t)}}),[e,n]),r}(c),i=S("dataTypes",[le.FOUNDATION]),o=Object(g.a)(i,2),d=o[0],l=o[1],s=Se(a,d),u=s.data,j=s.error,b=(null===u||void 0===u||null===(e=u.foods)||void 0===e?void 0:e.map(P))||[],O=Object(f.useContext)(Ie),m=O.starred,h=O.setStarred,p=function(e){l(Object(v.uniq)([].concat(Object(ee.a)(d),[e])))},x=function(e){return l(Object(v.without)(d,e))},y=Object(f.useState)(),N=Object(g.a)(y,2),I=N[0],C=N[1],w=Object(f.useState)(!1),F=Object(g.a)(w,2),M=F[0],E=F[1];return Object(k.jsxs)(G,{children:[I&&Object(k.jsx)(xe,{id:I,isOpen:M,onClose:function(){E(!1),C(void 0)}}),Object(k.jsx)(Le,{value:c,onChange:function(e){return r(e.target.value)},placeholder:"Search For Food"}),Object(k.jsx)(Je,{children:Object.values(le).map((function(e){return Object(k.jsxs)("label",{style:{marginRight:"10px"},children:[Object(k.jsx)("input",{type:"checkbox",name:e,defaultChecked:d.includes(e),onChange:function(n){return(n.target.checked?p:x)(e)}},e),e]})}))}),Object(k.jsx)(Be,{children:b.map((function(e){return Object(k.jsx)("li",{children:Object(k.jsx)(Ne,{food:e,actions:Object(k.jsxs)("div",{children:[Object(k.jsx)(ne,{onClick:function(){return h([].concat(Object(ee.a)(m||[]),[e.id]))},children:(null===m||void 0===m?void 0:m.includes(e.id))?"Unstar":"Star"}),Object(k.jsx)(ne,{onClick:function(){return n=e.id,C(n),void E(!0);var n},children:"Log"})]})})},e.id)}))}),Object(k.jsx)("pre",{children:Object(k.jsx)("code",{children:JSON.stringify(j,null,2)})})]})},ze=function(e){var n=e.id,t=R(n),c=t.food,r=t.error,a=Object(f.useContext)(Ie),i=a.starred,o=a.setStarred,d=!c&&!r,l=null===i||void 0===i?void 0:i.includes(n);return Object(k.jsxs)(k.Fragment,{children:[d&&Object(k.jsx)("span",{children:"Loading..."}),c&&Object(k.jsx)(Ne,{food:c,actions:Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("button",{onClick:l?function(){return o(Object(v.without)(i,n))}:function(){return o(Object(v.uniq)([].concat(Object(ee.a)(i||[]),[n])))},children:l?"Unstar":"Star"})})}),JSON.stringify(r)]})},Ve=function(){var e=S("starred",[]),n=Object(g.a)(e,2),t=n[0],c=n[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("ul",{children:(t||[]).map((function(e){return Object(k.jsx)("li",{children:Object(k.jsx)(ze,{id:e})},e)}))}),Object(k.jsx)("button",{onClick:function(){return c([])},children:"Clear Starred Items"})]})},Re=y.a.span(Me||(Me=Object(p.a)(['\n  margin-left: 4px;\n  &[data-status="loading"] {\n    color: blue;\n  }\n  &[data-status="valid"] {\n    color: green;\n  }\n  &[data-status="invalid"] {\n    color: red;\n  }\n']))),Ye=function(e){var n=Object(f.useContext)(F),t=n.key,c=n.setKey,r=R(747447),a=r.food,i=r.apiError,o=r.error,d=r.isLoading,l=Boolean(a),s=Boolean(i||o);return Object(k.jsxs)(G,Object(N.a)(Object(N.a)({},e),{},{children:[Object(k.jsx)("h2",{children:"Settings"}),Object(k.jsx)("p",{children:"You can change some settings here :)"}),Object(k.jsx)("h3",{children:Object(k.jsx)("label",{htmlFor:"apiKey",children:"API Key"})}),Object(k.jsx)("p",{children:"This app comes with a default API key. If that one ever gets invalidated or starts hitting the rate-limit too often, you can request your own from the FDA website and paste it below."}),Object(k.jsx)(te,{id:"apiKey",type:"text",value:t,onChange:function(e){return c(e.target.value)}}),Object(k.jsxs)(Re,{"data-status":(d?"loading":l&&"valid")||s&&"invalid",children:[d&&"loading...",a&&"\u2714\ufe0f valid",s&&"\u274c invalid"]})]}))},Ue=y.a.nav(Ee||(Ee=Object(p.a)(["\n  color: white;\n  background-color: salmon;\n  border-bottom: 1px solid violet;\n\n  width: 100%;\n  padding: 4px;\n  box-sizing: border-box;\n\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n\n  a {\n    color: white;\n  }\n"]))),qe=function(e){return Object(k.jsxs)(Ue,Object(N.a)(Object(N.a)({},e),{},{children:[Object(k.jsx)(Z.b,{to:"/",children:Object(k.jsx)("h1",{children:"Healthy"})}),Object(k.jsxs)("div",{children:["production",Object(k.jsx)(Z.b,{to:"/settings",children:"Settings"})]})]}))},Ge=y.a.a(Pe||(Pe=Object(p.a)(["\n  left: -999px;\n  position: absolute;\n  top: auto;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  z-index: -999;\n  &:focus,\n  &:active {\n    color: #fff;\n    background-color: #000;\n    left: auto;\n    top: auto;\n    width: 30%;\n    height: auto;\n    overflow: auto;\n    margin: 10px 35%;\n    padding: 5px;\n    border-radius: 15px;\n    border: 4px solid yellow;\n    text-align: center;\n    font-size: 1.2em;\n    z-index: 999;\n  }\n"]))),We=y.a.div(De||(De=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]))),_e=Object(y.a)((function(e){return Object(k.jsx)(Q,Object(N.a)(Object(N.a)({},e),{},{children:Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:Object(k.jsx)($,{to:"/",children:"Search"})}),Object(k.jsx)("li",{children:Object(k.jsx)($,{to:"/starred",children:"Starred"})}),Object(k.jsx)("li",{children:Object(k.jsx)($,{to:"/meals",children:"My Meals"})})]})}))}))(Te||(Te=Object(p.a)(["\n  order: 1;\n"]))),He=y.a.div(Ae||(Ae=Object(p.a)(["\n  flex-grow: 1;\n  overflow: auto;\n"]))),Xe=function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Ge,{href:"#main",children:"Jump to Main Content"}),Object(k.jsxs)(We,{children:[Object(k.jsx)(_e,{}),Object(k.jsxs)(He,{children:[Object(k.jsx)(qe,{}),Object(k.jsxs)(x.c,{children:[Object(k.jsx)(x.a,{path:"/",exact:!0,children:Object(k.jsx)(Ke,{})}),Object(k.jsx)(x.a,{path:"/starred",children:Object(k.jsx)(Ve,{})}),Object(k.jsx)(x.a,{path:"/meals",children:Object(k.jsx)(X,{})}),Object(k.jsx)(x.a,{path:"/settings",children:Object(k.jsx)(Ye,{})})]})]})]})]})},Ze=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,61)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),c(e),r(e),a(e),i(e)}))},Qe=function(e,n){return fetch(e,n).then((function(e){return e.json()}))},$e=function(e){var n=e.children;return Object(k.jsx)(C.a,{value:{refreshInterval:0,revalidateOnFocus:!1,dedupingInterval:6e5,fetcher:Qe},children:n})};h.a.render(Object(k.jsx)(O.a.StrictMode,{children:Object(k.jsx)($e,{children:Object(k.jsx)(M,{children:Object(k.jsx)(Ce,{children:Object(k.jsx)(_,{children:Object(k.jsx)(Z.a,{children:Object(k.jsx)(Xe,{})})})})})})}),document.getElementById("root")),Ze()}},[[60,1,2]]]);
//# sourceMappingURL=main.c917551f.chunk.js.map